{% extends "base.html" %}
{% block content %}

<h3 class="fw-bold mb-4">Helmet Compliance Analytics</h3>

<!-- Summary Cards -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="card p-4 shadow-sm">
            <h6 class="text-muted">Total No-Helmet Violations</h6>
            <h2 class="text-danger fw-bold">{{ violations }}</h2>
            <p class="small text-muted">
                Number of detected riders not wearing helmets.
            </p>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card p-4 shadow-sm">
            <h6 class="text-muted">Safety Impact</h6>
            <h4 class="fw-bold text-success">High Risk Reduction</h4>
            <p class="small text-muted">
                Helmet usage reduces head injury risk by up to 70%.
            </p>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card p-4 shadow-sm">
            <h6 class="text-muted">System Accuracy</h6>
            <h4 class="fw-bold text-primary">Optimized Detection</h4>
            <p class="small text-muted">
                AI model filtered with high-confidence helmet detection.
            </p>
        </div>
    </div>
</div>

<!-- Chart Section -->
<div class="card p-4 mb-4 shadow-sm">
    <h5 class="fw-bold mb-3">Violation Distribution</h5>
    <canvas id="violationChart"></canvas>
</div>

<!-- Insights Section -->
<div class="card p-4 shadow-sm">
    <h5 class="fw-bold mb-3">Key Insights</h5>
    <ul>
        <li>
            Majority of violations occur due to non-compliance with helmet safety rules.
        </li>
        <li>
            Automated helmet detection helps reduce manual traffic monitoring workload.
        </li>
        <li>
            This system can be integrated with CCTV cameras for real-time surveillance.
        </li>
        <li>
            Historical data can be used to identify high-risk zones and time periods.
        </li>
    </ul>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById("violationChart"), {
    type: "bar",
    data: {
        labels: ["No Helmet Violations"],
        datasets: [{
            label: "Detected Cases",
            data: [{{ violations }}],
            backgroundColor: "#dc3545"
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false
            }
        }
    }
});
</script>

{% endblock %}
